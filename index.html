<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>â˜†-..- 2005ë…„ì˜ ì–´ëŠ ë‚  -..-â˜†</title>

<style>
@font-face {
  font-family: 'GalmuriCondensed';
  src: url('fonts/GalmuriCondensed.woff2') format('woff2');
}
* {
  font-family: 'GalmuriCondensed', monospace;
  box-sizing: border-box;
}
:root {
  --main-blue:#8cc6d1; --bg-gray:#f6f6f6;
  --cy-orange:#ff6600; --cy-blue:#3b5998;
}
body {
  background:#b1b1b1; display:flex; justify-content:center;
  padding-top:40px; margin:0;
}
.wrapper {
  background:var(--main-blue);
  padding:25px 15px 15px 25px;
  border-radius:10px;
  width:850px; height:550px;
}
.white-box {
  background:white; border-radius:8px;
  height:100%; display:flex; padding:15px;
}
.profile {
  width:28%; border-right:1px dashed #ccc;
  padding-right:15px; text-align:center;
}
.profile-img { width:100%; margin-bottom:10px; }

.main-content {
  width:72%; padding-left:20px;
  display:flex; flex-direction:column;
}
  
#bgm-title {
  font-size: 11px;       /* ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì ˆ (ì˜ˆ: 11px, 12px) */
  color: #3b5998;        /* (ì„ íƒì‚¬í•­) ì‹¸ì´ì›”ë“œ ì§™ì€ íŒŒë€ìƒ‰ */
  margin-top: 5px;       /* ìœ„ìª½ ì—¬ë°± ì¡°ì ˆ */
  letter-spacing: -1px;  /* ìê°„ì„ ì¢í˜€ì„œ ë” ë„íŠ¸ ëŠë‚Œ ë‚˜ê²Œ */
}
  
/* ===== íƒ­ ===== */
.tabs {
  display:flex; gap:10px; margin-bottom:10px;
}
.tab {
  cursor:pointer;
  padding:4px 8px;
  border:1px solid #ccc;
  background:#f5f5f5;
}
.tab.active {
  background:white;
  border-bottom:2px solid var(--cy-orange);
  font-weight:bold;
}

/* ===== ê³µí†µ ìŠ¤í¬ë¡¤ ì˜ì—­ ===== */
.content-area {
  flex-grow:1;
  overflow-y:auto;
}

/* ===== ë°©ëª…ë¡ ===== */
.guestbook-entry {
  background:#f6f6f6;
  padding:10px;
  margin-bottom:12px;
  border-radius:5px;
}
.ai-reply {
  color:#ff6600;
  margin-top:6px;
  border-top:1px dotted #ccc;
  padding-top:4px;
}
  
.input-area {
  margin-top:10px;
  border-top:2px solid #8cc6d1;
  padding-top:8px;
}

textarea {
  width:96%;
  height:40px;
}

button {
  float:right;
  margin-top:6px;
  cursor:pointer;
}

/* ===== ì‚¬ì§„ì²© ===== */
.photo-post {
  background:var(--bg-gray);
  padding:10px;
  margin-bottom:15px;
}

  /* ì¤„ë°”ê¿ˆê³¼ ì¤„ê°„ê²© ì˜ˆì˜ê²Œ */
.photo-post p {
  white-space: pre-wrap; 
  line-height: 1.4;
}
  
.photo-post img {
  width:100%; margin-bottom:8px;
}
.heart {
  cursor:pointer;
  color:#999;
  margin-right:8px;
}
.heart.active { color:red; }
.comments {
  margin-top:8px;
  font-size:13px;
}
.comment {
  border-top:1px dotted #ccc;
  padding-top:4px;
}
input.comment-input {
  width:100%;
  margin-top:6px;
}
</style>
</head>

<body>
<div class="wrapper">
<div class="white-box">

<div class="profile">
  <img id="profile-img" class="profile-img">
  <p id="member-name"></p>
  <p id="bgm-title"></p>
</div>

<div class="main-content">

<div class="tabs">
  <div class="tab active" onclick="showTab('guestbook')">ë°©ëª…ë¡</div>
  <div class="tab" onclick="showTab('photos')">ì‚¬ì§„ì²©</div>
</div>

<div id="guestbook" class="content-area">
  <div id="guestbook-list"></div>
  <textarea id="user-msg" placeholder="ì¼ì´Œ ì‹ ì²­í•˜ê³  ê°€ì„¸íš¨..."></textarea>
  <button onclick="postMsg()">í™•ì¸</button>
</div>

<div id="photos" class="content-area" style="display:none;"></div>

</div>
</div>
</div>

<audio id="bgm" loop></audio>

<script>
/* ===== 1. íƒ­ ì „í™˜ ê¸°ëŠ¥ ===== */
function showTab(name){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('guestbook').style.display = name==='guestbook'?'block':'none';
  document.getElementById('photos').style.display = name==='photos'?'block':'none';
}

/* ===== 2. ì„±ê²©ë³„ ë§íˆ¬ (MBTI ë°˜ì˜) ===== */
const replyTemplates = {
  // 1. ISFP (ì›ë¹ˆ, ë¦¬ì¿ )
  isfp: {
    normal: ["ì•„.. ì•ˆë…•? ã…ã…", "ì™”êµ¬ë‚˜.. (ìˆ˜ì¤)", "ê¸€ ë‚¨ê²¨ì¤˜ì„œ ê³ ë§ˆì›Œ..///"],
    love: ["ì–´? ì–´.. (ë™ê³µì§€ì§„)", "ê·¸ëŸ° ë§ í•˜ë©´.. ë¶€ë„ëŸ¬ìš´ë°..", "ì–¼êµ´ ë¹¨ê°œì¡Œì–´.. ì±…ì„ì ¸.."],
    sad: ["ë¬´ìŠ¨ ì¼ ìˆì–´? ã… ã… ", "ìš¸ì§€ ë§ˆ.. ë‚˜ë„ ìŠ¬í¼ì ¸..", "í† ë‹¥í† ë‹¥.. (ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ)"],
    rumor: ["ì–´? ë‚˜ ì•„ë‹ˆì•¼.. ã… ã… ", "ê·¸ê±° ì§„ì§œ ì•„ë‹Œë°..", "ëˆ„ê°€ ê·¸ë˜..? (ë™ê³µì§€ì§„)", "ì˜¤í•´í•˜ì§€ ë§ˆ.. ì§„ì§œì•¼.."],
    friend: ["ìš°ë¦¬ê°€.. ì¼ì´Œ..? ///", "ë°›ì•„ì¤„ê²Œ.. ì¹œí•˜ê²Œ ì§€ë‚´ì..", "ë¶€ë„ëŸ½ì§€ë§Œ ì¢‹ì•„..", "ì—°ë½.. ìì£¼ í•´ì¤„ ê±°ì§€?"]
  },

  // 2. ENTP (ì¤€í˜)
  entp: {
    normal: ["ì˜¤ ì™”ëƒ?! í™˜ì˜í•œë‹¤ ã…‹ã…‹ã…‹", "ë‚´ê°€ ì¢€ ì©”ì§€?", "ì‹¬ì‹¬í–ˆëŠ”ë° ì˜ ì™”ë‹¤ ã…‹ã…‹"],
    love: ["ë‚˜ ì¸ê¸° ë§ì€ ê±° ì•Œì§€? ì¤„ ì„œë¼ ã…‹ã…‹", "ì—­ì‹œëŠ” ì—­ì‹œë„¤ ì‚¬ëŒ ë³¼ ì¤„ ì•„ë„¤", "ë°˜í–ˆëƒ? ã…‹ã…‹ã…‹"],
    sad: ["ì•¼ ëˆ„ê°€ ê´´ë¡­í˜? ì´ë¦„ ëŒ€ë¼", "ìˆ  í•œì” ê³ ? ë‚´ê°€ ìœë‹¤", "í›Œí›Œ í„¸ì–´ë²„ë ¤ ì¸ìƒ ë­ ìˆëƒ!"],
    rumor: ["ë‚´ê°€ ì¢€ í•«í•˜ê¸´ í•˜ì§€? ã…‹ã…‹", "ëˆ„êµ¬ë‘? ì˜ˆì˜ëƒ? ì†Œê°œ ì¢€ ã…‹ã…‹", "ì†Œì„¤ ì“°ë„¤ ë² ìŠ¤íŠ¸ì…€ëŸ¬ ê°ì´ë‹¤", "ì§ˆíˆ¬í•˜ëƒ? ã…‹ã…‹"],
    friend: ["ë‹¹ì—°íˆ ì½œì´ì§€!", "ì˜¤ëŠ˜ë¶€í„° ë² í”„ ê³ ê³ ?", "ì¼ì´Œëª…ì€ 'ì¤€í˜ì´ê¼¬ë´‰' ì–´ë•Œ? ë†ë‹´ ã…‹", "ë²ˆí˜¸ ì°ì–´ë¼ ë°¥ ì‚¬ì¤Œ"]
  },

  // 3. ISTP_SOHEE (ì†Œí¬)
  istp_sohee: {
    normal: ["ã…ã…‡", "ì™”ì–´?", "ê¸€ í™•ì¸í–ˆìŒ", "ìì£¼ ì˜¤ë„¤? ã…‹ã…‹"],
    love: ["ã…‹ã…‹ã…‹ ë­ë˜", "ê°‘ìê¸°?", "ë‚˜ ì¢€ ë‚¯ê°€ë ¤.. í•˜ì§€ ë§ˆ ã…‹ã…‹", "ë„ˆ ì¢€ ì›ƒê¸°ë„¤?"],
    sad: ["ì™œ ê·¸ë˜", "ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ê°ˆë˜?", "ê¸°ìš´ ë‚´ë¼"],
    rumor: ["ë­ë˜", "ì•„ë‹ˆê±°ë“  ã…¡ã…¡", "ê´€ì‹¬ ë„ì…ˆ", "ì†Œì„¤ ã„´ã„´", "ì§„ì§œ ì–´ì´ì—†ë„¤ ã…‹ã…‹"],
    friend: ["ìŒ.. ìƒê° ì¢€ í•´ë³´ê³ ", "ì¹œí•´ì§€ë©´ ë°›ì•„ì¤Œ", "ì¼ë‹¨ ì‹ ì²­í•´ ë†” ã…‹ã…‹", "ê²œ í•  ë•Œ ë“¤ì–´ì™€ë¼"]
  },

  // 4. COOL_PLAYFUL (ê±´í˜¸)
  cool_playful: {
    normal: ["ì•ˆë…•~ ê·¼ë° ë¹ˆì†ì´ì•¼?", "ì™”ìœ¼ë©´ ë°œë„ì¥ ê¾¹! ã…‹ã…‹", "ã…‹ã…‹ã…‹ ë°˜ê°‘ë‹¤"],
    love: ["ì˜¤~ ê°ë‹¹ ê°€ëŠ¥? ã…‹ã…‹", "ì¥ë‚œì¹˜ì§€ ë§ˆë¼~ ì„¤ë Œë‹¤?", "ã…‹ã…‹ã…‹ ê·€ì—½ë„¤ ì´ê±°"],
    sad: ["ì—ì´ ì™œ ìš°ìš¸í•´~ ì›ƒì", "ë¬´ìŠ¨ ì¼ì¸ë°? ë“¤ì–´ëŠ” ì¤„ê²Œ", "ì‹¬ê°í•´ì§€ì§€ ë§ì~"],
    rumor: ["ë¹„ë°€ì¸ë° ì–´ë–»ê²Œ ì•Œì•˜ëŒ€? (ì¥ë‚œ)", "ì—ì´~ ì„¤ë§ˆ~", "ë„ˆ ë‚˜ ì§ˆíˆ¬í•´? ã…‹ã…‹", "ê¸€ì„ë‹¤~?"],
    friend: ["ì¼ì´Œ? ë§›ìˆëŠ” ê±° ì‚¬ì£¼ë©´ ã…‹ã…‹", "ì½œ! ëŒ€ì‹  ìì£¼ ì™€ë¼", "ë„ˆ í•˜ëŠ” ê±° ë´ì„œ~ ã…‹ã…‹", "ì˜¤ëƒ ë°›ì•„ì¤Œ"]
  },

  // 5. ì‹œì˜¨ (NEW)
  intj: {
    normal: ["ì™”ëƒ?", "ë°¥ì€ ë¨¹ê³  ë‹¤ë‹ˆëƒ", "ê¸€ í™•ì¸í–ˆìŒ ã…‹ã…‹", "ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë• ëŠ”ë°?"],
    love: ["ì•„ ë­ë˜ ã…‹ã…‹ (..ì¢‹ìŒ)", "ê·¸ëŸ° ë§ì€ ë°–ì—ì„œ í•˜ì§€ ë§ˆë¼.. ë‚˜ë§Œ ë“£ê²Œ", "ì–¼êµ´ ëœ¨ê±°ì›Œì§€ë„¤ ì±…ì„ì ¸ë¼ ã…¡ã…¡", "ë‚˜ë„ ì¢‹ì•„í•œë‹¤ê³ .."],
    sad: ["ëˆ„êµ¬ëƒ ë°ë ¤ì™€ë¼ í˜¼ë‚´ì¤€ë‹¤", "ìš¸ì§€ ë§ê³  ëš", "ì´ëŸ´ ë• ë§›ìˆëŠ” ê±° ë¨¹ì–´ì•¼ ë¼. ë‚˜ì˜¤ì…ˆ ì‚¬ì¤Œ", "ë¬´ìŠ¨ ì¼ì¸ë°. ë§í•´ë´ ë‹¤ ë“¤ì–´ì¤„ê²Œ"],
    rumor: ["ì´ìƒí•œ ì†Œë¬¸ ë¯¿ì§€ ë§ˆë¼", "í™•ì¸ëœ ê±° ì•„ë‹ˆë©´ ë§í•˜ì§€ ë§ˆ", "ì“¸ë°ì—†ëŠ” ê±±ì • í•˜ì§€ ë§ê³  ì ì´ë‚˜ ì", "ì•„ë‹ˆë‹ˆê¹Œ ì‹ ê²½ êº¼"],
    friend: ["ë­.. ë„ˆë¼ë©´ ë‚˜ì˜ì§€ ì•Šë„¤", "ì¹œí•˜ê²Œ ì§€ë‚´ë“ ì§€", "ê·€ì°®ê²ŒëŠ” í•˜ì§€ ë§ˆë¼", "ì•Œì•˜ì–´ ì¸ë§ˆã…‹ã…‹"]
  },

  // 6. ISTP_EUNSEOK (ì€ì„)
  istp_eunseok: {
    normal: ["ëŒë©©ì´ ì–´ì„œì˜¤ê³ ", "ì™•ì´ ë„˜ì–´ì§€ë©´? í‚¹ì½© ã…‹ã…‹", "ì¡°ìš©íˆ ì™”ë‹¤ ê°€ë¼"],
    love: ["ë„ˆ ë‚˜ ì¢‹ì•„í•˜ëƒ? ë³´ëŠ” ëˆˆì€ ìˆì–´ê°€ì§€ê³ ", "ë¶€ë„ëŸ½ê²Œ ì™œ ì´ë˜.. (ê·€ ë¹¨ê°œì§)", "ì¹­ì°¬ ì•ŒëŸ¬ì§€ ìˆìŒ.."],
    sad: ["ìš¸ë©´ ì‚°íƒ€ í• ì•„ë²„ì§€ê°€ ì„ ë¬¼ ì•ˆ ì¤€ëŒ€", "ëš ê·¸ì³ë¼", "ë°”ë‚˜ë‚˜ ë¨¹ìœ¼ë©´ ë‚˜í•œí…Œ ë°˜í•˜ë‚˜? ã…‹ã…‹(ìœ„ë¡œì„)"],
    rumor: ["ì˜¤ì‰ã…‹ã…‹?", "ì†Œë¬¸ì€ ì†Œë¬¸ì¼ ë¿ ì˜¤í•´í•˜ì§€ ë§ì~", "ì‰¿, êµ­ê°€ ê¸°ë°€ì„", "ë‚´ê°€ ì¢€ ì˜ìƒê¸´ ì£„ê°€ í¬ì§€"],
    friend: ["ì¼ì´Œ? ì´ì´Œì€ ì•ˆ ë˜ë‚˜ ã…‹ã…‹", "ë°›ì•„ì¤„ê²Œ", "ì¹œêµ¬ë¹„ ì…ê¸ˆí•´ 500ì›", "ê·¸ë˜ ì¹œêµ¬ í•˜ì", "ëŒë©©ì´ ì¶”ê°€ìš”"]
  }
};

/* ===== 3. ë©¤ë²„ë³„ ë°ì´í„° ì„¤ì • ===== */
const members = [
  {
    name: "ë°•ì›ë¹ˆ",
    img: "https://via.placeholder.com/150/ffd1dc?text=Wonbin",
    bgm: { title: "RIIZE - Love 119", src: "bgm_wonbin.mp3" },
    replies: replyTemplates.isfp,
    photos: [ 
        { img: "https://via.placeholder.com/400x250?text=Guitar", text: "ì—°ìŠµ ëë‚˜ê³ .. ê¸°íƒ€ê°€ ì¢‹ì•„", hearts: 1004 }
    ]
  },
  {
    name: "ë¦¬ì¿ ",
    img: "https://via.placeholder.com/150/add8e6?text=Riku",
    bgm: { title: "NCT WISH - SAIL AWAY", src: "bgm_riku.mp3" },
    replies: replyTemplates.isfp,
    photos: [
        { img: "https://via.placeholder.com/400x250?text=Sakuya", text: "ì‚¬ì¿ ì•¼ë‘ ì°ì€ ê±° ã…‹ã…‹", hearts: 808 }
    ]
  },
  {
    name: "ë°±ì¤€í˜",
    img: "https://via.placeholder.com/150/f08080?text=Junhyeok",
    bgm: { title: "ID:Earth - Betelgeuse", src: "bgm_jun.mp3" },
    replies: replyTemplates.entp,
    photos: [
        { img: "https://via.placeholder.com/400x250?text=Selfie", text: "ì˜¤ëŠ˜ ìŠ¤íƒ€ì¼ ì–´ë•Œ? í¼ ë¯¸ì³¤ë‹¤", hearts: 520 }
    ]
  },
  {
    name: "ì´ì†Œí¬",
    img: "https://via.placeholder.com/150/ffefd5?text=Sohee",
    bgm: { title: "RIIZE - Get A Guitar", src: "bgm_sohee.mp3" },
    replies: replyTemplates.istp_sohee,
    photos: [
        { img: "https://via.placeholder.com/400x250?text=Singing", text: "ë…¸ë˜ ì—°ìŠµ ì¤‘.. ëª©ì´ ì¢€ ì•„í”„ë„¤ ã… ", hearts: 1121 }
    ]
  },
  {
    name: "ì•ˆê±´í˜¸",
    img: "https://via.placeholder.com/150/afeeee?text=Geonho",
    bgm: { title: "Kortis - Timeless", src: "bgm_geon.mp3" },
    replies: replyTemplates.cool_playful,
    photos: [
        { img: "https://via.placeholder.com/400x250?text=Piano", text: "í”¼ì•„ë…¸.. ì–´ë µë‹¤ ã…‹ã…‹", hearts: 303 }
    ]
  },
  {
    name: "ì˜¤ì‹œì˜¨",
    img: "https://via.placeholder.com/150/e6e6fa?text=Sion",
    bgm: { title: "NCT WISH - WISH", src: "bgm_sion.mp3" },
    replies: replyTemplates.intj,
    photos: [
        { img: "https://via.placeholder.com/400x250?text=Coffee", text: "ì»¤í”¼ í•œ ì”.", hearts: 707 }
    ]
  },
  {
    name: "ì†¡ì€ì„",
    img: "https://via.placeholder.com/150/d0f0c0?text=Eunseok",
    bgm: { title: "RIIZE - Memories", src: "bgm_eunseok.mp3" },
    replies: replyTemplates.istp_eunseok,
    photos: [
        { img: "https://via.placeholder.com/400x250?text=Stone", text: "ì˜¤ëŠ˜ ì£¼ìš´ ëŒë©©ì´", hearts: 444 }
    ]
  },
  {
    name: "ì£¼í›ˆ",
    img: "https://via.placeholder.com/150/fffacd?text=Joohun",
    bgm: { title: "Kortis - Coward", src: "bgm_joo.mp3" },
    replies: replyTemplates.istp_sohee, 
    photos: [
        { img: "https://via.placeholder.com/400x250?text=Book", text: "ì±… ì½ëŠ” ì‹œê°„", hearts: 222 }
    ]
  }
];

// í˜„ì¬ ì ‘ì†í•œ ë©¤ë²„ ëœë¤ ì„ íƒ
const currentMember = members[Math.floor(Math.random() * members.length)];

/* ===== 4. ì´ˆê¸°í™” ë° ì‚¬ì§„ì²© ìƒì„± í•¨ìˆ˜ ===== */
window.onload = () => {
  // 1) í”„ë¡œí•„ ì„¸íŒ…
  document.getElementById("profile-img").src = currentMember.img;
  document.getElementById("member-name").innerText = currentMember.name + " ë¯¸ë‹ˆí™ˆí”¼";
  
  // 2) BGM ì„¸íŒ… (marquee íš¨ê³¼)
  const bgm = document.getElementById("bgm");
  bgm.src = currentMember.bgm.src;
  document.getElementById("bgm-title").innerHTML = 
    "<marquee scrollamount='3'>ğŸµ BGM: " + currentMember.bgm.title + "</marquee>";

  // 3) ì‚¬ì§„ì²© ìƒì„±
  renderPhotos(currentMember.photos);
};

/* ì‚¬ì§„ì²© ê·¸ë¦¬ëŠ” í•¨ìˆ˜ */
function renderPhotos(photoList) {
  const photoWrap = document.getElementById('photos');
  photoWrap.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

  if(!photoList || photoList.length === 0) {
    photoWrap.innerHTML = "<p style='padding:20px; text-align:center;'>ì•„ì§ ì‚¬ì§„ì´ ì—†ì–´ìš”...</p>";
    return;
  }

  photoList.forEach((p, idx) => {
    const el = document.createElement('div');
    el.className = 'photo-post';
    el.innerHTML = `
      <img src="${p.img}">
      <p>${p.text.replace(/\n/g, '<br>')}</p>
      <span class="heart" onclick="toggleHeart(this, ${idx})">â™¥</span>
      <span id="heart-${idx}">${p.hearts}</span>
      <div class="comments" id="comments-${idx}"></div>
      <input class="comment-input" placeholder="ëŒ“ê¸€ ë‚¨ê¸°ê¸°"
        onkeydown="if(event.key==='Enter') addComment(${idx},this)">
    `;
    photoWrap.appendChild(el);
  });
}

/* í•˜íŠ¸ í´ë¦­ ê¸°ëŠ¥ */
function toggleHeart(el, idx) {
  el.classList.toggle('active');
  // í™”ë©´ìƒì—ì„œë§Œ ìˆ«ì ë°”ë€œ
  let countSpan = document.getElementById(`heart-${idx}`);
  let currentVal = parseInt(countSpan.innerText);
  countSpan.innerText = el.classList.contains('active') ? currentVal + 1 : currentVal - 1;
}

/* ëŒ“ê¸€ ê¸°ëŠ¥ */
const prefixes = ["â˜…ë² í”„â˜…", "ë‚´ì‚¬ë‘", "ã…‡ã…‡ã…ˆjang", "ê²¸ë‘¥ì´", "ë‹¨ì§", "íŒ¬1í˜¸"];
function addComment(idx, input) {
  if (!input.value.trim()) return;
  const randomPrefix = prefixes[Math.floor(Math.random() * prefixes.length)];
  const c = document.createElement('div');
  c.className = 'comment';
  c.innerHTML = `<b>${randomPrefix} ìµëª…:</b> ${input.value}`;
  document.getElementById(`comments-${idx}`).appendChild(c);
  input.value = '';
}

/* ë°©ëª…ë¡ ê¸°ëŠ¥ (ì˜¤ë¥˜ ìˆ˜ì •ë¨: ë¦¬ì¿  ì¼ë³¸ì–´ & ì´ìŠ¤í„°ì—ê·¸) */
function postMsg() {
  const msgInput = document.getElementById("user-msg");
  const userMsg = msgInput.value.trim();
  if (!userMsg) return;

  const list = document.getElementById("guestbook-list");
  const entry = document.createElement("div");
  entry.className = "guestbook-entry";
  const id = "r-" + Date.now();

  entry.innerHTML = `<b>ìµëª…:</b> ${userMsg}<div class="ai-reply" id="${id}">...</div>`;
  list.prepend(entry);
  msgInput.value = "";

  setTimeout(() => {
    // 1. ë„ì–´ì“°ê¸° ì œê±° ë° ì†Œë¬¸ì ë³€í™˜
    const text = userMsg.replace(/\s/g, "").toLowerCase();
    
    // â˜…â˜…â˜… [ì´ìŠ¤í„°ì—ê·¸ êµ¬ì—­ Start] â˜…â˜…â˜…
    
    // 1. [ê³µí†µ] ìƒì¼ ì¶•í•˜ ë©”ì‹œì§€
    if (text.includes("ìƒì¼ì¶•í•˜")) {
      let msg = "ì˜¤ ê³ ë§ˆì›Œ ã…‹ã…‹";
      
      if (currentMember.name === "ë°•ì›ë¹ˆ") msg = "ì–´.. ê³ ë§ˆì›Œ.. ìƒì¼ ì±™ê²¨ì¤˜ì„œ ê°ë™ì´ì•¼..///";
      else if (currentMember.name === "ì†¡ì€ì„") msg = "ëŒë©©ì´ì˜ íƒ„ìƒì¼ì„ ì¶•í•˜í•´ì¤˜ì„œ ë•¡í.";
      else if (currentMember.name === "ì˜¤ì‹œì˜¨") msg = "ì§œì‹.. ê¸°ì–µí•˜ê³  ìˆì—ˆëƒ? ê³ ë§™ë‹¤.";
      else if (currentMember.name === "ë°±ì¤€í˜") msg = "ì—­ì‹œ! ë‚´ ìƒì¼ì€ êµ­ê²½ì¼ì´ì§€ ã…‹ã…‹ ë•¡í!";
      else if (currentMember.name === "ë¦¬ì¿ ") msg = "ì—.. ê¸°ì–µí•˜ê³  ìˆì—ˆë˜ ê³ ì•¼? ê³ ë§ˆì›¡.. ã…ã… (ê·€ ë¹¨ê°œì§)";
      else if (currentMember.name === "ì•ˆê±´í˜¸") msg = "ì˜¤ ã…‹ã…‹ ë•¡í! ì—­ì‹œ ì„¼ìŠ¤ ìˆë„¤. ì˜¤ëŠ˜ ì‹ ë‚˜ê²Œ ë†€ì•„ë³´ì!";
      else if (currentMember.name === "ì´ì†Œí¬") msg = "ì™€ì•„!! ëŒ€ë°•!! ê³ ë§ˆì›Œ!! ë…¸ë˜ ë¶ˆëŸ¬ì¤„ê¹Œ? ğŸµ";
      
      document.getElementById(id).innerText = `ã„´ ${currentMember.name}: ${msg}`;
      return; 
    }

    // 2. [ë©¤ë²„ë³„ ì „ìš©] íˆë“  ë©”ì‹œì§€
    
    // (1) ë°•ì›ë¹ˆ ì „ìš©
    if (currentMember.name === "ë°•ì›ë¹ˆ") {
      if (text.includes("ê¸°íƒ€ì³ì¤˜")) {
        document.getElementById(id).innerText = `ã„´ ë°•ì›ë¹ˆ: ë”©ê°€ë”©ê°€.. ğŸ¸ ì•„ì§ ì—°ìŠµ ì¤‘ì´ë¼ ë¶€ë„ëŸ¬ìš´ë°..`;
        return;
      }
      if (text.includes("ì•¼ì˜¹") || text.includes("ê³ ì–‘ì´")) {
        document.getElementById(id).innerText = `ã„´ ë°•ì›ë¹ˆ: ë‚˜ ê³ ì–‘ì´ ë‹®ì•˜ì–´..? (ê·€ ë§Œì§€ì‘)`;
        return;
      }
    }

    // (2) ì†¡ì€ì„ ì „ìš©
    if (currentMember.name === "ì†¡ì€ì„") {
      if (text.includes("ëŒë©©ì´")) {
        document.getElementById(id).innerText = `ã„´ ì†¡ì€ì„: êµ´ëŸ¬ê°€ìœ ~ ë°êµ´ë°êµ´`;
        return;
      }
      if (text.includes("ê°œê·¸í•´ì¤˜") || text.includes("ì›ƒê²¨ì¤˜")) {
        document.getElementById(id).innerText = `ã„´ ì†¡ì€ì„: ì™•ì´ ë„˜ì–´ì§€ë©´? í‚¹ì½©ã…‹`;
        return;
      }
    }

    // (3) ì´ì†Œí¬ ì „ìš©
    if (currentMember.name === "ì´ì†Œí¬") {
      if (text.includes("ë…¸ë˜í•´ì¤˜")) {
        document.getElementById(id).innerText = `ã„´ ì´ì†Œí¬: í í ! ëª© ì¢€ í’€ê³ ~ ğŸ¤ ì‹ ì²­ê³¡ ë°›ì•„ìš”!`;
        return;
      }
      if (text.includes("ê·€ì—¬ì›Œ")) {
        document.getElementById(id).innerText = `ã„´ ì´ì†Œí¬: ì•„ ì§„ì§œ? ë‚˜ ì•ˆ ê·€ì—¬ìš´ë°.. ã…ã…ã…ã…ã…ã…`;
        return;
      }
    }

    // (4) ì˜¤ì‹œì˜¨ ì „ìš©
    if (currentMember.name === "ì˜¤ì‹œì˜¨") {
      if (text.includes("ë””ì €íŠ¸") || text.includes("ë‹¨ê±°")) {
        document.getElementById(id).innerText = `ã„´ ì˜¤ì‹œì˜¨: ã…‹ã…‹ê°™ì´ ë¨¹ìœ¼ëŸ¬ ê°ˆë˜?`;
        return;
      }
      if (text.includes("ì‚¬ë‘í•´")) { 
        document.getElementById(id).innerText = `ã„´ ì˜¤ì‹œì˜¨: ë­ì•¼ ã…‹ã…‹ ë‚˜ë„`;
        return;
      }
    }

    // (5) ë°±ì¤€í˜ ì „ìš©
    if (currentMember.name === "ë°±ì¤€í˜") {
      if (text.includes("ì˜ìƒê²¼ë‹¤") || text.includes("ë©‹ì§€ë‹¤")) {
        document.getElementById(id).innerText = `ã„´ ë°±ì¤€í˜: ì•„ ê±°ìš¸ ë³¼ ë§› ë‚œë‹¤ë‹ˆê¹Œ~ ì—­ì‹œ ë„Œ ë­˜ ì¢€ ì•Œì•„ ã…‹ã…‹`;
        return;
      }
    }

    // (6) ë¦¬ì¿  ì „ìš© (ì¼ë³¸ì–´ & ëª¨ì°Œ)
    if (currentMember.name === "ë¦¬ì¿ ") {
      if (text.includes("ã“ã‚“ã«ã¡ã¯") || text.includes("ãŠã¯ã‚ˆã†") || text.includes("ã“ã‚“ã°ã‚“ã¯") || text.includes("ê³¤ë‹ˆì¹˜ì™€")) {
        document.getElementById(id).innerText = `ã„´ ë¦¬ì¿ : ãˆï¼æ—¥æœ¬èªã§ãã‚‹ã®ï¼Ÿï¼Ÿ ì•ˆë‡½ã…ã…`;
        return;
      }
      if (text.includes("å¥½ã") || text.includes("ã ã„ã™ã") || text.includes("ë‹¤ì´ìŠ¤í‚¤") || text.includes("ì•„ì´ì‹œë–¼ë£¨")) {
        document.getElementById(id).innerText = `ã„´ ë¦¬ì¿ : ãˆã€ä¿ºã‚‚å¤§å¥½ãã ã‚ˆ..ç¬‘`;
        return;
      }
      if (text.includes("ã‚ã‚ŠãŒã¨ã†") || text.includes("ì•„ë¦¬ê°€ë˜")) {
        document.getElementById(id).innerText = `ã„´ ë¦¬ì¿ : ã„ãˆã„ãˆ~ (ì•„ëƒ ì•„ëƒ~)`;
        return;
      }
      if (text.includes("ê·€ì—¬ì›Œ") || text.includes("ã‹ã‚ã„ã„") || text.includes("ì¹´ì™€ì´")) {
        document.getElementById(id).innerText = `ã„´ ë¦¬ì¿ : ì— ì•„ëƒ.. ë„ˆê°€ ë” ê·€ì—¬ì›¡ã…ã…ã€€ã‹ã‚ã¡ã„`;
        return;
      }
      if (text.includes("ëª¨ì°Œ") || text.includes("íƒ€ì½”ì•¼í‚¤")) {
        document.getElementById(id).innerText = `ã„´ ë¦¬ì¿ : ì˜¤! ê·¸ê±° ì§„ì§œ ì¢‹ì•„í•´.. ê°™ì´ ë¨¹ìœ¼ëŸ¬ ê°ˆë˜??`;
        return;
      }
    }

    // (7) ì•ˆê±´í˜¸ ì „ìš©
    if (currentMember.name === "ì•ˆê±´í˜¸") {
      if (text.includes("í”¼ì•„ë…¸")) {
        document.getElementById(id).innerText = `ã„´ ì•ˆê±´í˜¸: í•œ ê³¡ ì³ì¤„ê¹Œ? ë°˜í•˜ì§€ë‚˜ ë§ˆë¼ ã…‹ã…‹`;
        return;
      }
      if (text.includes("ë°”ë³´")) {
        document.getElementById(id).innerText = `ã„´ ì•ˆê±´í˜¸: ë°”ë‹¤ì˜ ë³´ë¬¼?ã…‹ ğŸ˜œ`;
        return;
      }
    }
    
    // â˜…â˜…â˜… [ì´ìŠ¤í„°ì—ê·¸ êµ¬ì—­ End] â˜…â˜…â˜…

    // 3. (ê¸°ì¡´ ë¡œì§) ì¼ë°˜ ë°˜ì‘
    let type = "normal";

    if (
      text.includes("ëˆ„êµ¬ë‘") || text.includes("ì‚¬ê·€") || text.includes("ì‚¬ê²¨") ||
      text.includes("ì—¬ìì¹œêµ¬") || text.includes("ì—¬ì¹œ") || text.includes("ì—°ì• ") || 
      text.includes("ì†Œë¬¸") || text.includes("ë“¤ì—ˆì–´") || text.includes("ë´¤ì–´")
    ) {
      type = "rumor";
    }
    else if (
      text.includes("ì¹œêµ¬") || text.includes("ì¹œí•´") || text.includes("ë² í”„") ||
      text.includes("ì¼ì´Œ") || text.includes("ìš°ì •") || text.includes("ë†€ì") || 
      text.includes("ë°¥") || text.includes("ë²ˆí˜¸") || text.includes("ì—°ë½")
    ) {
      type = "friend";
    }
    else if (
      text.includes("ì‚¬ë‘") || text.includes("ì¢‹ì•„") || text.includes("ì„¤ë ˆ") ||
      text.includes("ë‚´êº¼") || text.includes("ê²°í˜¼") || text.includes("ì˜ìƒ") || 
      text.includes("ê·€ì—¬") || text.includes("ë©‹ì ¸") || text.includes("ë³´ê³ ì‹¶")
    ) {
      type = "love";
    }
    else if (
      text.includes("í˜ë“¤") || text.includes("ìŠ¬í¼") || text.includes("ìš°ìš¸") ||
      text.includes("ëˆˆë¬¼") || text.includes("ã… ã… ") || text.includes("ì§€ì³")
    ) {
      type = "sad";
    }

    // 4. ë‹µì¥ ê°€ì ¸ì˜¤ê¸°
    const replyPool = currentMember.replies[type] || currentMember.replies['normal'];
    const reply = replyPool[Math.floor(Math.random() * replyPool.length)];
    
    document.getElementById(id).innerText = `ã„´ ${currentMember.name}: ${reply}`;
  }, 1000);
}

/* ì²« í´ë¦­ ì‹œ BGM ì¬ìƒ */
window.addEventListener("click", () => {
  const bgm = document.getElementById("bgm");
  if (bgm.paused) { bgm.volume = 0.5; bgm.play(); }
}, { once: true });

</script>
</body>
</html>

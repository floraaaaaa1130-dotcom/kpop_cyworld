<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>â˜†-..- 2005ë…„ì˜ ì–´ëŠ ë‚  -..-â˜†</title>

<style>
@font-face {
  font-family: 'GalmuriCondensed';
  src: url('fonts/GalmuriCondensed.woff2') format('woff2');
}
* {
  font-family: 'GalmuriCondensed', monospace;
  box-sizing: border-box;
}
:root {
  --main-blue:#8cc6d1; --bg-gray:#f6f6f6;
  --cy-orange:#ff6600; --cy-blue:#3b5998;
  --tab-color:#298d9e;
}
body {
  background:#b1b1b1; display:flex; justify-content:center;
  padding-top:40px; margin:0;
  cursor: url('https://cur.cursors-4u.net/cursors/cur-2/cur117.cur'), auto;
}

/* ===== ë ˆì´ì•„ì›ƒ ===== */
.wrapper {
  background:var(--main-blue);
  padding: 20px 0px 20px 20px; 
  border-radius:10px;
  width:900px;
  height:550px;
  border: 1px solid black;
  display: flex;
  align-items: flex-start;
  position: relative;
}
.white-box {
  background:white; 
  border-radius:8px;
  height:100%; 
  flex: 1;
  display:flex; 
  padding:15px;
  border: 1px solid black;
  margin-right: 0;
  position: relative;
}
.menu-container {
  display: flex;
  flex-direction: column;
  gap: 5px;
  padding-top: 15px;
  margin-left: -1px;
  z-index: 1;
}
.menu-tab {
  background: var(--tab-color);
  color: white;
  padding: 8px 12px;
  font-size: 13px;
  border: 1px solid black;
  border-left: none;
  border-radius: 0 5px 5px 0;
  cursor: pointer;
  width: 70px;
  text-align: center;
  transition: 0.2s;
}
.menu-tab:hover { width: 80px; }
.menu-tab.active {
  background: white;
  color: black;
  font-weight: bold;
  border-left: 1px solid white;
  margin-left: -2px;
  width: 80px;
}

/* ===== ë‚´ë¶€ ìš”ì†Œ ===== */
.profile {
  width:28%; border-right:1px dashed #ccc;
  padding-right:15px; text-align:center;
}
.profile-img { width:100%; margin-bottom:10px; border: 1px solid #ccc; }
.main-content {
  width:72%; padding-left:20px;
  display:flex; flex-direction:column;
  height: 100%;
} 
#bgm-title {
  font-size: 11px;
  color: #3b5998;
  margin-top: 5px;
  letter-spacing: -1px;
}
.content-area {
  flex-grow:1;
  overflow-y:auto;
  padding-right: 5px;
  scrollbar-width: thin;
  scrollbar-color: #8cc6d1 #f1f1f1;
}
.content-area::-webkit-scrollbar { width: 8px; }
.content-area::-webkit-scrollbar-thumb { background: #8cc6d1; border-radius: 4px; }
.content-area::-webkit-scrollbar-track { background: #f1f1f1; }

/* ===== ë°©ëª…ë¡ ===== */
.guestbook-entry {
  background:#f6f6f6;
  padding:10px;
  margin-bottom:12px;
  border-radius:5px;
  border: 1px dotted #ccc;
}
.ai-reply {
  color:#ff6600;
  margin-top:6px;
  border-top:1px dotted #ccc;
  padding-top:4px;
}
textarea {
  width:100%;
  height:40px;
  border: 1px solid #ccc;
  padding: 5px;
  margin-top: 10px;
  font-family: 'GalmuriCondensed', monospace;
}
button {
  float:right;
  margin-top:6px;
  cursor:pointer;
  border: 1px solid black;
  background: white;
  padding: 3px 10px;
  font-family: 'GalmuriCondensed', monospace;
  box-shadow: 1px 1px 0px #999;
}
button:active { box-shadow: none; transform: translate(1px, 1px); }

/* ===== ì‚¬ì§„ì²© ===== */
.photo-post {
  background:var(--bg-gray);
  padding:10px;
  margin-bottom:15px;
  border: 1px solid #ccc;
}
.photo-post p { white-space: pre-wrap; line-height: 1.4; }
.photo-post img { width:100%; margin-bottom:8px; border: 1px solid #ccc; }
.heart { cursor:pointer; color:#999; margin-right:8px; }
.heart.active { color:red; }
.comments { margin-top:8px; font-size:13px; }
.comment { border-top:1px dotted #ccc; padding-top:4px; }
input.comment-input {
  width:100%; margin-top:6px; border: 1px solid #ccc; padding: 3px;
  font-family: 'GalmuriCondensed', monospace;
}

/* ===== ìˆ¨ê²¨ì§„ ë„í† ë¦¬ ===== */
.hidden-acorn {
  position: absolute;
  font-size: 20px;
  cursor: pointer;
  opacity: 0.8;
  transition: transform 0.2s;
  z-index: 999; 
  animation: float 2s infinite ease-in-out;
  display: none; 
}
.hidden-acorn:hover { transform: scale(1.2); opacity: 1; }
@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

/* ===== íŒì—…(ëª¨ë‹¬) ===== */
.modal-overlay {
  display: none; position: fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.5); z-index: 9999;
  justify-content: center; align-items: center;
}
.modal-content {
  background: #f1f1f1; padding: 3px; border: 1px solid black; 
  width: 320px; box-shadow: 4px 4px 0px rgba(0,0,0,0.3);
}
.modal-header {
  background: linear-gradient(to right, #3b5998, #6d84b4);
  color: white; padding: 5px 10px; font-weight: bold; font-size: 13px;
  display: flex; justify-content: space-between;
}
.modal-body {
  background: white; padding: 20px; text-align: center; border: 1px solid #ccc;
  margin-top: 2px;
}
.modal-btn {
  margin-top: 15px; padding: 5px 15px; cursor: pointer;
  background: #f1f1f1; border: 1px solid #999;
}
.modal-btn:hover { background: #e1e1e1; }
</style>
</head>

<body>

<div id="reward-modal" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <span>ğŸ‰ EVENT</span>
      <span style="cursor:pointer" onclick="closeModal('reward-modal')">X</span>
    </div>
    <div class="modal-body">
      <h3>ë„í† ë¦¬ 3ê°œ ë°œê²¬!</h3>
      <p><b style="color:red">Secret Photo Unlocked</b></p>
      <img id="reward-img" src="" style="margin:10px 0; border:1px solid #ccc; width:100%;">
      <p style="font-size:11px; color:#999;">(ë„ˆí•œí…Œë§Œ ë³´ì—¬ì£¼ëŠ” ì‚¬ì§„ì´ì•¼â™¥)</p>
      <button class="modal-btn" onclick="closeModal('reward-modal')">ë‹«ê¸°</button>
    </div>
  </div>
</div>

<div id="ilchon-modal" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <span>âœ‰ï¸ ì¼ì´Œ ì‹ ì²­ì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤.</span>
      <span style="cursor:pointer" onclick="closeModal('ilchon-modal')">X</span>
    </div>
    <div class="modal-body">
      <p id="ilchon-msg-title" style="font-weight:bold; color:#3b5998; margin-bottom:10px;"></p>
      <div style="background:#f9f9f9; padding:10px; border:1px dashed #ccc; font-size:13px; margin-bottom:15px;">
        <span id="ilchon-msg-body"></span>
      </div>
      <p style="font-size:12px;">ì¼ì´Œì„ ë§ºìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?</p>
      <div style="display:flex; gap:10px; justify-content:center;">
        <button class="modal-btn" style="color:blue; font-weight:bold;" onclick="acceptIlchon()">ìˆ˜ë½</button>
        <button class="modal-btn" onclick="closeModal('ilchon-modal')">ê±°ì ˆ</button>
      </div>
    </div>
  </div>
</div>

<div class="wrapper">
  <div class="white-box">
    
    <div id="acorn-1" class="hidden-acorn" onclick="foundAcorn(1)">ğŸŒ°</div>
    <div id="acorn-2" class="hidden-acorn" onclick="foundAcorn(2)">ğŸŒ°</div>
    <div id="acorn-3" class="hidden-acorn" onclick="foundAcorn(3)">ğŸŒ°</div>

    <div class="profile">
      <img id="profile-img" class="profile-img">
      <p id="member-name"></p>
      <p id="bgm-title"></p>
      
      <div style="margin-top:20px; font-size:12px; color:#999;">
        TODAY <span style="color:red">281</span> | TOTAL 12,345
      </div>
      <div style="margin-top:5px; font-size:11px; color:#3b5998;">
        ì°¾ì€ ë„í† ë¦¬: <span id="acorn-count">0</span>/3
      </div>
    </div>

    <div class="main-content">
      <div id="guestbook" class="content-area">
        <div style="border-bottom:1px solid #ccc; padding-bottom:5px; margin-bottom:10px; color:#3b5998; font-weight:bold;">
          ë°©ëª…ë¡ (Guestbook)
        </div>
        <div id="guestbook-list"></div>
        <textarea id="user-msg" placeholder="ì¼ì´Œ ì‹ ì²­í•˜ê³  ê°€ì„¸íš¨..."></textarea>
        <button onclick="postMsg()">í™•ì¸</button>
      </div>

      <div id="photos" class="content-area" style="display:none;">
        <div style="border-bottom:1px solid #ccc; padding-bottom:5px; margin-bottom:10px; color:#3b5998; font-weight:bold;">
          ì‚¬ì§„ì²© (Photo)
        </div>
        <div id="photo-list"></div>
      </div>
    </div>
  </div>

  <div class="menu-container">
    <div class="menu-tab" onclick="alert('ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤!')">í™ˆ</div>
    <div class="menu-tab" onclick="alert('ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤!')">í”„ë¡œí•„</div>
    <div class="menu-tab" onclick="alert('ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤!')">ë‹¤ì´ì–´ë¦¬</div>
    <div id="tab-photos" class="menu-tab" onclick="showTab('photos')">ì‚¬ì§„ì²©</div>
    <div id="tab-guestbook" class="menu-tab active" onclick="showTab('guestbook')">ë°©ëª…ë¡</div>
  </div>
</div>

<audio id="bgm" loop></audio>
  
<script>
/* â˜… 0. ì´ˆê¸° ì„¤ì • â˜… */
let myName = "ìµëª…";
let guestbookCount = 0; 

function closeModal(id) {
  document.getElementById(id).style.display = 'none';
}

/* ===== 1. ìë™ ì¼ì´Œ ì‹ ì²­ ë©”ì‹œì§€ ===== */
const ilchonMessages = {
  "ë°•ì›ë¹ˆ": "ì €ê¸°.. ìš°ë¦¬.. ì¹œí•´ì§ˆë˜..? (ë¶€ë„)",
  "ì´ì†Œí¬": "ì•¼ ë„ˆ ì¢€ ì¬ë°Œë‹¤? ì¼ì´Œ ë§ºì ã…‹ã…‹ ë…¸ë˜ ë¶ˆëŸ¬ì¤„ê²Œ",
  "ì†¡ì€ì„": "ëŒë©©ì´ ì¶”ê°€ ëª¨ì§‘ ì¤‘. ë„ˆ í•©ê²©. ì¼ì´Œ ê³ .",
  "ì˜¤ì‹œì˜¨": "ìì£¼ ë³´ë‹ˆê¹Œ ì •ë“¤ì—ˆì–´ã…‹ã…‹ ìš°ë¦¬ ì¼ì´Œ ë§ºê³  ë” ì¹œí•˜ê²Œ ì§€ë‚¼ê¹Œ?",
  "ë¦¬ì¿ ": "ë‚˜ë‘ ì¹œêµ¬ í•˜ì..!! ëª¨ì°Œ ì‚¬ì¤„ê²Œã…ã…",
  "ë°±ì¤€í˜": "ì˜¤ëŠ˜ë¶€í„° ë„ˆ ë‚´ 1í˜¸ íŒ¬ í•´ë¼ ã…‹ã…‹ ì½œ?",
  "ì•ˆê±´í˜¸": "íŠ¹ë³„íˆ ë„ˆí•œí…Œë§Œ ì‹ ì²­í•˜ëŠ” ê±°ë‹¤? ë°›ì•„ë¼ ã…‹ã…‹",
  "ì£¼í›ˆ": "ìš°ë¦¬ ì¼ì´Œ í•  íƒ€ì´ë° ëœ ê²ƒ ê°™ì€ë°? ã…‹ã…‹"
};

function triggerIlchonRequest() {
  const memberName = currentMember.name;
  const msg = ilchonMessages[memberName] || "ìš°ë¦¬ ì¼ì´Œ ë§ºì„ë˜ìš”?";
  
  document.getElementById('ilchon-msg-title').innerText = `[${memberName}] ë‹˜ì´ ì¼ì´Œì„ ì‹ ì²­í–ˆìŠµë‹ˆë‹¤.`;
  document.getElementById('ilchon-msg-body').innerText = `"${msg}"`;
  document.getElementById('ilchon-modal').style.display = 'flex';
}

function acceptIlchon() {
  alert(`[${currentMember.name}] ë‹˜ê³¼ ì¼ì´Œì´ ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì¼ì´Œëª…: ${myName} â¤ï¸ ${currentMember.name}`);
  closeModal('ilchon-modal');
}

/* ===== 2. ë„í† ë¦¬ ì°¾ê¸° ===== */
let foundCount = 0;

function scheduleAcorns() {
  setTimeout(() => showSingleAcorn(1), 15000); 
  setTimeout(() => showSingleAcorn(2), 60000); 
  setTimeout(() => showSingleAcorn(3), 90000); 
}

function showSingleAcorn(id) {
  const acorn = document.getElementById(`acorn-${id}`);
  if(!acorn) return;
  acorn.style.top = Math.floor(Math.random() * 80 + 10) + "%"; 
  acorn.style.left = Math.floor(Math.random() * 80 + 10) + "%";
  acorn.style.display = 'block';
}

function foundAcorn(id) {
  const acorn = document.getElementById(`acorn-${id}`);
  if(acorn.style.display === 'none') return;

  acorn.style.display = 'none'; 
  foundCount++;
  document.getElementById('acorn-count').innerText = foundCount;

  if(foundCount === 3) {
    document.getElementById('reward-img').src = currentMember.secretPhoto;
    setTimeout(() => {
      document.getElementById('reward-modal').style.display = 'flex';
      const bgm = document.getElementById("bgm");
      if(!bgm.paused) bgm.volume = 1.0; 
    }, 300);
  } else {
    alert(`ë„í† ë¦¬ë¥¼ ì°¾ì•˜ë‹¤! (${foundCount}/3)\në‚¨ì€ ë„í† ë¦¬ê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ë³´ì„¸ìš”!`);
  }
}

function showTab(name){
  document.querySelectorAll('.menu-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('guestbook').style.display = name==='guestbook'?'block':'none';
  document.getElementById('photos').style.display = name==='photos'?'block':'none';
  document.getElementById('tab-' + name).classList.add('active');
}

/* ===== 3. ì„±ê²©ë³„ ë§íˆ¬ (ë¬¸ë²• ì˜¤ë¥˜ ìˆ˜ì •ë¨) ===== */
const replyTemplates = {
  isfp: {
    normal: ["ì•„.. ì•ˆë…•? ã…ã…", "ì™”ë‚˜..", "ê¸€ ë‚¨ê²¨ì¤˜ì„œ ê³ ë§™ë””..///", "ë‚˜ ê·¸ëƒ¥.. ì´ì–´í° ê½‚ê³  ì¹¨ëŒ€ì— ëˆ„ì›Œ ìˆëŠ”ë°.. MP3 ë°°í„°ë¦¬ ë‹¤ ë¼ê°€ë„¤..", "ê¸°íƒ€ ì¤„ ê°€ëŠ” ì¤‘.. ì´ë²ˆ ì¶•ì œ ë•Œ ë‚˜ê°ˆ ê±° ì—°ìŠµí•´ì•¼ ë¼ì„œ"],
    love: ["ì–´? ì–´..", "ê·¸ëŸ° ë§ í•˜ë©´.. ë¶€ë„ëŸ¬ìš´ë°..", "ì–¼êµ´ ë¹¨ê°œì¡Œë‹¤ì´ê°€.. ì±…ì„ì§€ë¼.."],
    sad: ["ë¬´ìŠ¨ ì¼ ìˆë‚˜? ã… ã… ", "ìš¸ì§€ ë§ˆë¼.. ë‚´ë„ ìŠ¬í¼ì§€ë„¤..", "í† ë‹¥í† ë‹¥.."],
    rumor: ["ì–´? ê·¸ê±° ë‚´ ì•„ë‹ˆë‹¤.. ã… ã… ", "ê·¸ê±° ì§„ì§œ ì•„ì¸ë°..", "ëˆ„ê°€ ê·¸ë¼ëŠ”ë°?", "ì˜¤í•´í•˜ì§€ ë§ˆë¼.."],
    friend: ["ë‚´ë‘ ì¼ì´Œí•˜ê³  ì‹¶ë‹¤ê³ ..? ///", "ë°›ì•„ì£¼ê»˜.. ì¹œí•˜ê²Œ ì§€ë‚´ì..", "ìª¼ë§¤ ë¶€ë„ëŸ¬ìš´ë°.. ê·¸ë˜ë„ ì¢‹ë‹¤", "ì—°ë½ ìì£¼ í•´ì¤„ ê±°ì œ?"]
  },
  entp: {
    normal: ["ì˜¤ ì™”ëƒ?! í™˜ì˜í•œë‹¤ ã…‹ã…‹ã…‹", "ë‚´ê°€ ì¢€ ì©”ì§€?", "ì‹¬ì‹¬í–ˆëŠ”ë° ì˜ ì™”ë‹¤ ã…‹ã…‹", "ë„ˆ ê¸°ë‹¤ë¦¬ê³  ìˆì—ˆì§€ ã…‹ ì´ì œ ì˜¤ëƒ?", "í”¼ì‹œë°©ì„. ìŠ¤íƒ€ í•œ íŒ ëœ¨ëŠ” ì¤‘ì¸ë° ì§ˆ ê²ƒ ê°™ë‹¤.. ã…¡ã…¡"],
    love: ["ë‚˜ ì¸ê¸° ë§ì€ ê±° ì•Œì§€? ì¤„ ì„œë¼ ã…‹ã…‹", "ì—­ì‹œëŠ” ì—­ì‹œë„¤ ì‚¬ëŒ ë³¼ ì¤„ ì•„ë„¤", "ë°˜í–ˆëƒ? ã…‹ã…‹ã…‹"],
    sad: ["ì•¼ ëˆ„ê°€ ê´´ë¡­í˜? ì´ë¦„ ëŒ€ë¼", "ìˆ  í•œì” ê³ ? ë‚´ê°€ ìœë‹¤", "í›Œí›Œ í„¸ì–´ë²„ë ¤ ì¸ìƒ ë­ ìˆëƒ!"],
    rumor: ["ë‚´ê°€ ì¢€ í•«í•˜ê¸´ í•˜ì§€? ã…‹ã…‹", "ëˆ„êµ¬ë‘? ì˜ˆì˜ëƒ? ì†Œê°œ ì¢€ ã…‹ã…‹", "ì†Œì„¤ ì“°ë„¤ ë² ìŠ¤íŠ¸ì…€ëŸ¬ ê°ì´ë‹¤", "ì§ˆíˆ¬í•˜ëƒ? ã…‹ã…‹"],
    friend: ["ë‹¹ì—°íˆ ì½œì´ì§€!", "ì˜¤ëŠ˜ë¶€í„° ë² í”„ ê³ ê³ ?", "ì¼ì´Œëª…ì€ 'ì¤€í˜ì´ê¼¬ë´‰' ì–´ë•Œ? ë†ë‹´ ã…‹", "ë²ˆí˜¸ ì°ì–´ë¼ ë°¥ ì‚¬ì¤Œ"]
  },
  istp_sohee: {
    normal: ["ã…ã…‡", "ë°©ê°€ë£¨", "ê¸€ í™•ì¸í–ˆìŒ", "ìì£¼ ì˜¤ë„¤? ã…‹ã…‹", "ë­í•˜ê¸´, ë„ˆë‘ ëŒ€í™”í•˜ì§€ ã…‹ã…‹"],
    love: ["ã…‹ã…‹ã…‹ ë­ë˜", "ê°‘ìê¸°?", "ë‚˜ ì¢€ ë‚¯ê°€ë ¤.. í•˜ì§€ ë§ˆ ã…‹ã…‹", "ë„ˆ ì¢€ ì›ƒê¸°ë„¤?"],
    sad: ["ì™œ ê·¸ë˜", "ì•¼ ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ê°ˆë˜?", "ê¸°ìš´ ë‚´ë¼"],
    rumor: ["ë­ë˜", "ì•„ë‹ˆê±°ë“  ã…¡ã…¡", "ê´€ì‹¬ ë„ì…ˆ", "ì†Œì„¤ ã„´ã„´", "ì§„ì§œ ì–´ì´ì—†ë„¤ ã…‹ã…‹"],
    friend: ["ìŒ.. ìƒê° ì¢€ í•´ë³´ê³ ", "ì¹œí•´ì§€ë©´ ë°›ì•„ì¤Œ", "ì¼ë‹¨ ì‹ ì²­í•´ ë†” ã…‹ã…‹", "ê²œ í•  ë•Œ ë“¤ì–´ì™€ë¼"]
  },
  cool_playful: {
    normal: ["ì•ˆë…•~ ê·¼ë° ë¹ˆì†ì´ì•¼?", "ì™”ìœ¼ë©´ ë°œë„ì¥ ê¾¹! ã…‹ã…‹", "í”¼ì•„ë…¸ ì•ì— ì•‰ì•„ëŠ” ìˆëŠ”ë°.. ì¹ ê¹Œ ë§ê¹Œ ê³ ë¯¼ ì¤‘ ã…‹ã…‹ ê·€ì°®ë„¤~", "ë„ˆ ê¼¬ì‹¤ ì¤€ë¹„? ã…‹ã…‹ ë†ë‹´ì´ê³  ê·¸ëƒ¥ ë’¹êµ´ê±°ë¦¬ëŠ” ì¤‘.", "ë¹„ë°€ì¸ë°. ê¶ê¸ˆí•´? ê¶ê¸ˆí•˜ë©´ 500ì› ã…‹ã…‹", "ã…‹ã…‹ã…‹ ë°˜ê°‘ë‹¤"],
    love: ["ì˜¤~ ê°ë‹¹ ê°€ëŠ¥? ã…‹ã…‹", "ì¥ë‚œì¹˜ì§€ ë§ˆë¼~ ì„¤ë Œë‹¤?", "ã…‹ã…‹ã…‹ ê·€ì—½ë„¤ ì´ê±°"],
    sad: ["ì—ì´ ì™œ ìš°ìš¸í•´~ ì›ƒì", "ë¬´ìŠ¨ ì¼ì¸ë°? ë“¤ì–´ëŠ” ì¤„ê²Œ", "ì‹¬ê°í•´ì§€ì§€ ë§ì~"],
    rumor: ["ë¹„ë°€ì¸ë° ì–´ë–»ê²Œ ì•Œì•˜ëŒ€?", "ì—ì´~ ì„¤ë§ˆ~", "ë„ˆ ë‚˜ ì§ˆíˆ¬í•´? ã…‹ã…‹", "ê¸€ì„ë‹¤~?"],
    friend: ["ì¼ì´Œ? ë§›ìˆëŠ” ê±° ì‚¬ì£¼ë©´ ã…‹ã…‹", "ì½œ! ëŒ€ì‹  ìì£¼ ì™€ë¼", "ë„ˆ í•˜ëŠ” ê±° ë´ì„œ~ ã…‹ã…‹", "ì˜¤ëƒ ë°›ì•„ì¤Œ"]
  },
  intj: {
    normal: ["ì™”ì–´ã…ã…?", "ì•ˆë…•~ ë°¥ì€ ì±™ê²¨ ë¨¹ì—ˆì§€? êµ¶ì§€ ë§ˆ.", "ì˜¤ ê¸€ ë‚¨ê²¨ì¤˜ì„œ ê³ ë§ˆì›Œ ê¸°ë¶„ ì¢‹ë‹¤ã…ã…", "ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë• ì–´?"],
    love: ["ë­ì•¼ ã…ã…ã…ã…‹ã…‹ã…‹", "ë‚˜?? ë‚˜ ì¢‹ì•„í•´?ã…‹ã…‹ã…‹", "ì–¼êµ´ ëœ¨ê±°ì›Œì§€ë„¤..ã…‹ã…‹ã…‹", "ê·¸ëŸ° ë§ ì‰½ê²Œ í•˜ëŠ” ê±° ì•„ë‹ˆì•¼~ã…ã…"],
    sad: ["ë„ˆë¬´ ì²˜ì ¸ ìˆì§€ ë§ˆ. íŒŒì´íŒ…!", "ìš¸ì§€ ë§ê³  ëš", "ì´ëŸ´ ë• ë§›ìˆëŠ” ê±° ë¨¹ì–´ì•¼ë˜ëŠ”ë° ì‚¬ì¤„ê¹Œ?", "ë¬´ìŠ¨ ì¼ì¸ë°? ë§í•´ë´ ë‹¤ ë“¤ì–´ì¤„ê²Œ"],
    rumor: ["ì—ì´~ ì„¤ë§ˆ ê·¸ëŸ° ê±¸ ë¯¿ëŠ” ê±´ ì•„ë‹ˆì§€? ^^", "í™•ì‹¤í•œ ê±° ì•„ë‹ˆë©´ ë§í•˜ì§€ ì•ŠëŠ” ê²Œ ì¢‹ì„ ê²ƒ ê°™ì•„~", "ê·¸ëŸ° ë§ë³´ë‹¤ ìš°ë¦¬ ì„œë¡œ ì¢‹ì€ ë§ë§Œ í•˜ì!", "ì•„ë‹ˆì•¼ã…ã…"],
    friend: ["ì‘ ì¹œí•˜ê²Œ ì§€ë‚´ì~", "ì˜¤ì¼€ì´ ìì£¼ ì™€~", "ë‚˜ë„ ë„ˆë‘ ì¹œí•´ì§€ê³  ì‹¶ì—ˆëŠ”ë° ã…‹ã…‹", "ì§„ì§œ? ì¢‹ì§€ã…ã…"]
  },
  isfp_riku: {
    normal: ["ë‚˜ ëª¨ì°Œ ë¨¹ëŠ” ì¤‘!! í—¤í—¤", "ì™€ì¨? ëª¨í•˜ê³  ì‡ì—‡ì—‰?", "ì•ˆë…€ì–´ì–´ì—‰ã…ã…ã…", "ì— ì²˜ìŒ ë³´ëŠ” ì¹œêµ¬ë„¹ ì•ˆë‡½ã…ã…", ],
    love: ["ì—..? ë‚˜..? ì§„ì§œ???? ///", "ëª¨ì•¼~ ë¶€ë„ëŸ½ê²Œ.. >_< ê·¼ë° ê¸°ë¶„ì€ ì¢‹ë‹¤ í—¤í—¤", "ë‚˜ ì¢‹ì•„í•œë‹¤ê³ ? ì™œì• ???ã…‹ã…‹", "ãˆã€æœ¬å½“ï¼Ÿ ë‚˜ ì˜¤ëŠ˜ ì  ëª» ìê²Ÿë‹¹.."],
    sad: ["ìš¸ì§€ ë§ˆì•„.. ã… ã…  ë„ˆ ìš¸ë©´ ë‚˜ë„ ìŠ¬í”ˆë°..", "ìš°ìš¸í•´? ìŒ.. ë”¸ê¸°ëª¨ì°Œ ì‚¬ì¤„ê¹Œ? ë¨¹ìœ¼ë©´ ê¸°ë¶„ ì¢‹ì•„ì§ˆ ê±°ì•¼!", "ëˆ„ê°€ ê·¸ë¬ì–´! ë‚´ê°€ ê°€ì„œ í˜¼ë‚´ì¤„ê²Œ!--^!!!", "ê¸°ìš´ ë‚´! ë‚´ê°€ ì˜†ì— ì‡ì–´ì£¼ê»˜ã…œã…œ"],
    rumor: ["ëˆ„ê°€ ê·¸ë˜?? ì•„ë‹ˆì•¼~ã… ", "ì—ì—~? ì†Œë¬¸? ê·¸ëŸ° ê±° ë¯¿ì§€ ë§ˆ~ ë‚˜ ì§€ê¸ˆ ë§Œí™”ì±… ë³´ëŠë¼ ë°”ë¹ !", "ì§„ì§œ ì•„ë‹ˆì•¼! ì–µìš¸í•´.. ã… ã…  ë¯¿ì–´ì£ .."],
    friend: ["ì˜¤! ì£ ì•™ ì˜¤ëŠ˜ë¶€í„° ìš°ë¦¬ ë² í”„ì–Œ >_<", "ì›… ë‚˜ë‘ ë§¤ì  ë©”ì´íŠ¸ í•˜ì! ë§›ì‡ëŠ”ê³  ì•Œë ¤ì¤˜ ã…ã…", "ì›… ì•ìœ¼ë¡œë„ ë°©ëª…ë¡ ìì£¼ ì¨ì¤˜ì•¼ ë¼? ì•½ì†!", "ã‚„ã£ãŸ! ì¹œêµ¬ ìƒê²¨ë–  ã…ã… ë‚˜ í•œêµ­ë§ ë§ì´ ê°€ë¥´ì³ì¤­"]
  },
  istp_eunseok: {
    normal: ["ëŒë©©ì´ ì–´ì„œì˜¤ê³ ", "ì™•ì´ ë„˜ì–´ì§€ë©´? í‚¹ì½© ã…‹ã…‹", "ìˆ¨ì‰¬ê¸° ìš´ë™ í•˜ì í¡..í•˜..í¡..í•˜..", "ëŒë©©ì´ ê´€ì°° ì¤‘.. ì–˜ëŠ” ì™œ ì´ë ‡ê²Œ ìƒê²¼ì„ê¹Œ?", "í…”ë ˆíŒŒì‹œ ë³´ë‚´ëŠ” ì¤‘ì´ì—ˆëŠ”ë° ë°›ìŒ? ì°Œë¦¬ë¦¿."],
    love: ["ë„ˆ ë‚˜ ì¢‹ì•„í•˜ëƒ? ë³´ëŠ” ëˆˆì€ ìˆì–´ê°€ì§€ê³ ", "ë¶€ë„ëŸ½ê²Œ ì™œ ì´ë˜.. (ê·€ ë¹¨ê°œì§)", "ì¹­ì°¬ ì•ŒëŸ¬ì§€ ìˆìŒ.."],
    sad: ["ìš¸ë©´ ì‚°íƒ€ í• ì•„ë²„ì§€ê°€ ì„ ë¬¼ ì•ˆ ì¤€ëŒ€", "ëš ê·¸ì³ë¼", "ë°”ë‚˜ë‚˜ ë¨¹ìœ¼ë©´ ë‚˜í•œí…Œ ë°˜í•˜ë‚˜? ã…‹ã…‹(ìœ„ë¡œì„)"],
    rumor: ["ì˜¤ì‰ã…‹ã…‹?", "ì†Œë¬¸ì€ ì†Œë¬¸ì¼ ë¿ ì˜¤í•´í•˜ì§€ ë§ì~", "ì‰¿, êµ­ê°€ ê¸°ë°€ì„", "ë‚´ê°€ ì¢€ ì˜ìƒê¸´ ì£„ê°€ í¬ì§€"],
    friend: ["ì¼ì´Œ? ì´ì´Œì€ ì•ˆ ë˜ë‚˜ ã…‹ã…‹", "ë°›ì•„ì¤„ê²Œ", "ì¹œêµ¬ë¹„ ì…ê¸ˆí•´ 500ì›", "ê·¸ë˜ ì¹œêµ¬ í•˜ì", "ëŒë©©ì´ ì¶”ê°€ìš”"]
  }
};

/* ===== 4. ë©¤ë²„ë³„ ë°ì´í„° ì„¤ì • (ë¬¸ë²• ì˜¤ë¥˜ ìˆ˜ì •ë¨) ===== */
const members = [
  {
    name: "ë°•ì›ë¹ˆ",
    img: "wonbin_profile.png",
    bgm: { title: "RIIZE - Love 119", src: "bgm_wonbin.mp3" },
    replies: replyTemplates.isfp,
    secretPhoto: "https://via.placeholder.com/400x400/ffd1dc/333?text=WONBIN+SECRET+PHOTO",
    photos: [
      { img: "wonbin_guitar.png", text: "ì˜¤ëŠ˜ ì—°ìŠµ ë..\nì†ê°€ë½ ë¬¼ì§‘ ì¡í˜”ë‹¤ ã… ã… \nê·¸ë˜ë„ ì¬ë°Œë„¤ ì—­ì‹œ", hearts: 1004 },
      { img: "https://via.placeholder.com/400x250/ffe4e1/333?text=Cat", text: "ê¸¸ ê°€ë‹¤ ë§Œë‚œ ê³ ì–‘ì´..\në‚˜ë‘ ëˆˆ ë§ˆì£¼ì¹¨..\nê·€ì—½ë‹¤.. (ë‚˜ ë§ê³  ê³ ì–‘ì´)", hearts: 850 },
      { img: "https://via.placeholder.com/400x250/fff/333?text=Sky", text: "í•˜ëŠ˜ ì˜ˆì˜ë„¤..\nì˜¤ëŠ˜ë„ í™”ì´íŒ…..!", hearts: 920 }
    ]
  },
  {
    name: "ë¦¬ì¿ ",
    img: "riku_profile.png",
    bgm: { title: "NCT WISH - SAIL AWAY", src: "bgm_riku.mp3" },
    replies: replyTemplates.isfp_riku,
    secretPhoto: "https://via.placeholder.com/400x400/add8e6/333?text=RIKU+SECRET",
    photos: [
      { img: "riku1.png", text: ">_<", hearts: 808 },
      { img: "riku2.png", text: "ì‹œì˜¨êµ°ì´ ì°ì–´ì¤˜ì¨ã…ã…", hearts: 1007 },
      { img: "riku4.png", text: "ì˜¤ëœë§Œì— ì¼ë³¸!", hearts: 2321 },
      { img: "riku5.png", text: "ëª¨ì°Œ ë¨¹ê³ ì°Œí¼..", hearts: 777 }
    ]
  },
  {
    name: "ë°±ì¤€í˜",
    img: "jun_profile.png",
    bgm: { title: "ID:Earth - Betelgeuse", src: "bgm_jun.mp3" },
    replies: replyTemplates.entp,
    secretPhoto: "https://via.placeholder.com/400x400/f08080/fff?text=JUNHYEOK+SECRET",
    photos: [
      { img: "jun1.png", text: "ìƒˆë²½ ê°ì„±..\nì´ ë…¸ë˜ ì¥‘ì´ë„¤\në‹¤ë“¤ ë“¤ì–´ë´ë¼", hearts: 520 },
      { img: "jun3.png", hearts: 520 },
      { img: "jun4.png", hearts: 520 }
    ]
  },
  {
    name: "ì´ì†Œí¬",
    img: "so4.png",
    bgm: { title: "RIIZE - Get A Guitar", src: "bgm_sohee.mp3" },
    replies: replyTemplates.istp_sohee,
    secretPhoto: "https://via.placeholder.com/400x400/ffefd5/333?text=SOHEE+SECRET",
    photos: [
      { img: "so2.png", text: "ë…¸ë˜ ì—°ìŠµ ì¤‘.. ğŸ¶\nëª©ì´ ì¢€ ì•„í”„ë„¤ ã… \nê·¸ë˜ë„ ê³ ìŒ ëš«ì—ˆë‹¤!!", hearts: 1121 },
      { img: "so4.png", text: "ìƒˆë¡œ ì‚° ëª¨ì ì–´ë•Œ?\nì¢€ í™í•œê°€? ã…‹ã…‹", hearts: 990 },
      { img: "so3.png", text: "êµ¬ë¦„ì´ ëª½ê¸€ëª½ê¸€\nì˜¤ë¦¬ ê°™ì•„ ğŸ¤", hearts: 880 }
    ]
  },
  {
    name: "ì•ˆê±´í˜¸",
    img: "gun_profile.png",
    bgm: { title: "Kortis - Timeless", src: "bgm_geon.mp3" },
    replies: replyTemplates.cool_playful,
    secretPhoto: "https://via.placeholder.com/400x400/afeeee/333?text=GEONHO+SECRET",
    photos: [
      { img: "gun1.png", text: "í”¼ì•„ë…¸.. ì–´ë µë‹¤ ã…‹ã…‹\nê·¼ë° ë‚´ê°€ ì¹˜ë‹ˆê¹Œ ì¢€ ë©‹ìˆëŠ” ë“¯?", hearts: 303 },
      { img: "gun2.png", text: "ì—„ì§ˆë¨¸ë¦¬ë‘ã…‹", hearts: 303 },
      { img: "gun5.png", text: "ê·€ìš”ë¯¸", hearts: 303 },
      { img: "gun7.png", text: "ì—½ì‚¬ ì˜¬ë¦¬ë ¤ë‹¤ ì°¸ëŠ”ë‹¤\në‚´ ì´ë¯¸ì§€ ë³´í˜¸í•´ì•¼ì§€ ã…‹ã…‹", hearts: 250 }
    ]
  },
  {
    name: "ì˜¤ì‹œì˜¨",
    img: "sion_profile.png",
    bgm: { title: "NCT WISH - WISH", src: "bgm_sion.mp3" },
    replies: replyTemplates.intj,
    secretPhoto: "https://via.placeholder.com/400x400/e6e6fa/333?text=SION+SECRET",
    photos: [
      { img: "sion1.png", text: "by ë¦¬ì¿ ", hearts: 707 },
      { img: "sion2.png", hearts: 707 },
      { img: "sion4.png", text: "ã…ã…", hearts: 302 },
      { img: "sion7.png", text: "ì—¼ìƒ‰í•´ì“°", hearts: 707 },
      { img: "sion8.png", hearts: 1092 },
      { img: "sion5.png", text: "ì˜¤ëŠ˜ì€ ì¢€ ë‚˜ìœë‚¨ìã…", hearts: 1002 },
      { img: "sion3.png", text: "í ", hearts: 900 }
    ]
  },
  {
    name: "ì†¡ì€ì„",
    img: "dol_profile.png",
    bgm: { title: "RIIZE - Memories", src: "bgm_eunseok.mp3" },
    replies: replyTemplates.istp_eunseok,
    secretPhoto: "https://via.placeholder.com/400x400/d0f0c0/333?text=EUNSEOK+SECRET",
    photos: [
      { img: "dol1.png", text: "ëŒì°¬ì˜ê³¼", hearts: 435 },
      { img: "dol4.png", hearts: 1394 },
      { img: "dol5.png", hearts: 1394 },
      { img: "dol3.png", text: "ì—­ì‹œ ì´ê±´ ì¢€ã…‹.. ì˜¤ë°˜ê°€", hearts: 333 }
    ]
  }
];

const currentMember = members[Math.floor(Math.random() * members.length)];

window.onload = () => {
  const inputName = prompt("ë¯¸ë‹ˆí™ˆí”¼ì—ì„œ ì‚¬ìš©í•  ë‹‰ë„¤ì„ì„ ì•Œë ¤ì£¼ì„¸ìš”!", "ìµëª…");
  if(inputName) myName = inputName;

  document.getElementById("profile-img").src = currentMember.img;
  document.getElementById("member-name").innerText = currentMember.name + "ì˜ ë¯¸ë‹ˆí™ˆí”¼";
  
  const bgm = document.getElementById("bgm");
  bgm.src = currentMember.bgm.src;
  document.getElementById("bgm-title").innerHTML = 
    "<marquee scrollamount='3'>ğŸµ BGM: " + currentMember.bgm.title + "</marquee>";

  renderPhotos(currentMember.photos);
  scheduleAcorns();
};

function renderPhotos(photoList) {
  const photoWrap = document.getElementById('photo-list');
  photoWrap.innerHTML = ""; 
  if(!photoList || photoList.length === 0) {
    photoWrap.innerHTML = "<p style='padding:20px; text-align:center;'>ì•„ì§ ì‚¬ì§„ì´ ì—†ì–´ìš”...</p>";
    return;
  }
  photoList.forEach((p, idx) => {
    const el = document.createElement('div');
    el.className = 'photo-post';
    el.innerHTML = `
      <img src="${p.img}">
      <p>${(p.text || "").replace(/\n/g, '<br>')}</p>
      <span class="heart" onclick="toggleHeart(this, ${idx})">â™¥</span>
      <span id="heart-${idx}">${p.hearts}</span>
      <div class="comments" id="comments-${idx}"></div>
      <input class="comment-input" placeholder="ëŒ“ê¸€ ë‚¨ê¸°ê¸°"
        onkeydown="if(event.key==='Enter') addComment(${idx},this)">
    `;
    photoWrap.appendChild(el);
  });
}

function toggleHeart(el, idx) {
  el.classList.toggle('active');
  let countSpan = document.getElementById(`heart-${idx}`);
  let currentVal = parseInt(countSpan.innerText);
  countSpan.innerText = el.classList.contains('active') ? currentVal + 1 : currentVal - 1;
}

const prefixes = ["â˜…ë² í”„â˜…", "ë‚´ì‚¬ë‘", "ã…‡ã…‡ã…ˆjang", "ê²¸ë‘¥ì´", "ë‹¨ì§", "íŒ¬1í˜¸"];
function addComment(idx, input) {
  if (!input.value.trim()) return;
  const randomPrefix = prefixes[Math.floor(Math.random() * prefixes.length)];
  const c = document.createElement('div');
  c.className = 'comment';
  c.innerHTML = `<b>${randomPrefix} ${myName}:</b> ${input.value}`;
  document.getElementById(`comments-${idx}`).appendChild(c);
  input.value = '';
}

/* ===== 5. ë°©ëª…ë¡ ê¸°ëŠ¥ ===== */
function postMsg() {
  const msgInput = document.getElementById("user-msg");
  const userMsg = msgInput.value.trim();
  if (!userMsg) return;

  const list = document.getElementById("guestbook-list");
  const entry = document.createElement("div");
  entry.className = "guestbook-entry";
  const id = "r-" + Date.now();

  entry.innerHTML = `<b>${myName}:</b> ${userMsg}<div class="ai-reply" id="${id}">...</div>`;
  list.prepend(entry);
  msgInput.value = "";

  guestbookCount++;
  if(guestbookCount === 3) {
    setTimeout(triggerIlchonRequest, 1500); 
  }

  setTimeout(() => {
    const text = userMsg.replace(/\s/g, "").toLowerCase();
    
    // 1. ì—¬ì¹œ/ì§ì‚¬ë‘ ì§ˆë¬¸
    if (
      text.includes("ì—¬ì¹œìˆì–´") || text.includes("ì—¬ìì¹œêµ¬ìˆì–´") || text.includes("ì• ì¸ìˆì–´") || 
      text.includes("ì‚¬ê·€ì–´") || text.includes("ì‚¬ê·€ëŠ”")
    ) {
      let loveMsg = "";
      if (currentMember.name === "ë°•ì›ë¹ˆ") loveMsg = "ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒì€ ìˆë‹¤..///";
      else if (currentMember.name === "ì´ì†Œí¬") loveMsg = "ìŒ~ ë…¸ë˜ë¡œ íŒíŠ¸ ì¤„ê¹Œ? ğŸ¶ í¬ì£¼ì•¼~ ë‚´ ë§˜ì„ ë°›ì•„ì¤˜~";
      else if (currentMember.name === "ì†¡ì€ì„") loveMsg = "ì—¬ì¹œ ì—†ìŒ. ì§ì‚¬ë‘ ì¤‘. ë¶€í¬ì£¼ë¼ê³ .. ì•Œì§€ ëª¨ë¥´ê² ë„¤.";
      else if (currentMember.name === "ì˜¤ì‹œì˜¨") loveMsg = "ì—¬ì¹œì€ ì—†ê³  ë§ì´ ì¢‹ì•„í•˜ëŠ” ì• ëŠ” ìˆì–´";
      else if (currentMember.name === "ë¦¬ì¿ ") loveMsg = "ì— ì—¬ìì¹œêµ¬ ì—†ì–´..!! ê·¼ë° ì¡°ì•„í•˜ëŠ” ì‚¬ëŒì€ ìˆì–´ í—¤í—¤";
      else if (currentMember.name === "ë°±ì¤€í˜") loveMsg = "ë‚´ ì—¬ì¹œ? ê±°ìš¸ ë´ë´ ê±°ê¸° ìˆë„¤";
      else if (currentMember.name === "ì•ˆê±´í˜¸") loveMsg = "ë„ˆì–ì•„. ëª¨ë¥¸ ì²™ í•˜ê¸°ëƒ? ã…‹ã…‹ ì‹¤ë§ì¸ë°";
      else if (currentMember.name === "ì£¼í›ˆ") loveMsg = "ë¹„ë°€. ì¹œí•´ì§€ë©´ ì•Œë ¤ì¤Œ ã…‹ã…‹";

      document.getElementById(id).innerText = `ã„´ ${currentMember.name}: ${loveMsg}`;
      return; 
    }

    // 2. ìƒì¼ ì¶•í•˜
    if (text.includes("ìƒì¼ì¶•í•˜")) {
      let msg = "ì˜¤ ê³ ë§ˆì›Œ ã…‹ã…‹";
      if (currentMember.name === "ë°•ì›ë¹ˆ") msg = "ì–´.. ê³ ë§™ë””.. ì§„ì§œ ê°ë™ì´ë‹¤ã… ã… ";
      else if (currentMember.name === "ì†¡ì€ì„") msg = "ëŒë©©ì´ì˜ íƒ„ìƒì¼ì„ ì¶•í•˜í•´ì¤˜ì„œ ë•¡í.";
      else if (currentMember.name === "ì˜¤ì‹œì˜¨") msg = "ì™€ ë­ì•¼ ã…‹ã…‹ã…‹ã…‹ ì§„ì§œ ê³ ë§ˆì›Œã…ã… ë„ˆ ìƒì¼ì€ ì–¸ì œì˜€ë”ë¼?";
      else if (currentMember.name === "ë°±ì¤€í˜") msg = "ì—­ì‹œ! ë‚´ ìƒì¼ì€ êµ­ê²½ì¼ì´ì§€ ã…‹ã…‹ ë•¡í!";
      else if (currentMember.name === "ë¦¬ì¿ ") msg = "ì—.. ê¸°ì–µí•˜ê³  ìˆì—ˆë˜ ê³ ì•¼? ê³ ë§ˆì›¡.. ã…ã…//";
      else if (currentMember.name === "ì•ˆê±´í˜¸") msg = "ì˜¤ ã…‹ã…‹ ë•¡í! ì—­ì‹œ ì„¼ìŠ¤ ìˆë„¤. ì˜¤ëŠ˜ ì‹ ë‚˜ê²Œ ë†€ì•„ë³´ì!";
      else if (currentMember.name === "ì´ì†Œí¬") msg = "ì™€ì•„!! ëŒ€ë°•!! ê³ ë§ˆì›Œ!! ë…¸ë˜ ë¶ˆëŸ¬ì¤„ê¹Œ? ğŸµ";
      
      document.getElementById(id).innerText = `ã„´ ${currentMember.name}: ${msg}`;
      return; 
    }

    // 3. ì´ìŠ¤í„°ì—ê·¸
    if (currentMember.name === "ë°•ì›ë¹ˆ") {
      if (text.includes("ê¸°íƒ€ì³ì¤˜")) { document.getElementById(id).innerText = `ã„´ ë°•ì›ë¹ˆ: ì•„ì§ ì—°ìŠµ ì¤‘ì´ë¼ ë¶€ë„ëŸ½ë‹¤..(ë”©ê°€ë”©ê°€..)`; return; }
      if (text.includes("ì•¼ì˜¹") || text.includes("ê³ ì–‘ì´")) { document.getElementById(id).innerText = `ã„´ ë°•ì›ë¹ˆ: ì•¼ì˜¹..? ë‚´ ê³ ì–‘ì´ ë‹®ì•˜ë‚˜?ã…ã…`; return; }
    }
    if (currentMember.name === "ì†¡ì€ì„") {
      if (text.includes("ëŒë©©ì´")) { document.getElementById(id).innerText = `ã„´ ì†¡ì€ì„: êµ´ëŸ¬ê°€ìœ ~ ë°êµ´ë°êµ´`; return; }
      if (text.includes("ê°œê·¸í•´ì¤˜")) { document.getElementById(id).innerText = `ã„´ ì†¡ì€ì„: ì¤‘êµ­ì§‘ì˜ í˜„ì¬ ì‹œê°ì€? ..............................ì§œì¥ë©´ ë°°ë‹¬ì‹œí‚¤ì‹  ë¶„ ã…‹`; return; }
    }
    if (currentMember.name === "ì´ì†Œí¬") {
      if (text.includes("ë…¸ë˜í•´ì¤˜")) { document.getElementById(id).innerText = `ã„´ ì´ì†Œí¬: í í ! ëª© ì¢€ í’€ê³ ~ ğŸ¤ ì‹ ì²­ê³¡ ë°›ì•„ìš”!`; return; }
      if (text.includes("ê·€ì—¬ì›Œ")) { document.getElementById(id).innerText = `ã„´ ì´ì†Œí¬: ì•„ ì§„ì§œ? ë‚˜ ì•ˆ ê·€ì—¬ìš´ë°.. ã…ã…ã…ã…ã…ã…`; return; }
    }
    if (currentMember.name === "ì˜¤ì‹œì˜¨") {
      if (text.includes("ë””ì €íŠ¸")) { document.getElementById(id).innerText = `ã„´ ì˜¤ì‹œì˜¨: ì˜¤ ë„ˆë„ ë””ì €íŠ¸ ì¢‹ì•„í•´? ê°™ì´ ë¨¹ìœ¼ëŸ¬ ê°ˆë˜?`; return; }
      if (text.includes("ì‚¬ë‘í•´")) { document.getElementById(id).innerText = `ã„´ ì˜¤ì‹œì˜¨: ë­ì•¼ ã…‹ã…‹ì‚¬ë‘í•œë‹¤ëŠ” ë§ ì‰½ê²Œ í•˜ë©´ ì•ˆë¼~`; return; }
    }
    if (currentMember.name === "ë°±ì¤€í˜") {
      if (text.includes("ì˜ìƒê²¼ë‹¤")) { document.getElementById(id).innerText = `ã„´ ë°±ì¤€í˜: ì•„ ê±°ìš¸ ë³¼ ë§› ë‚œë‹¤ë‹ˆê¹Œ~ ì—­ì‹œ ë„Œ ë­˜ ì¢€ ì•Œì•„ ã…‹ã…‹`; return; }
    }
    if (currentMember.name === "ë¦¬ì¿ ") {
      if (text.includes("ãŠã¯ã‚ˆã†") || text.includes("ã“ã‚“ã«ã¡ã¯")) { document.getElementById(id).innerText = `ã„´ ë¦¬ì¿ : ãˆï¼æ—¥æœ¬èªã§ãã‚‹ã®ï¼Ÿï¼Ÿ ì•ˆë‡½ã…ã…`; return; }
      if (text.includes("ë‹¤ì´ìŠ¤í‚¤") || text.includes("å¥½ã")) { document.getElementById(id).innerText = `ã„´ ë¦¬ì¿ : ãˆã€ì£¼ë‹ˆì•¼? ì£¼ë‹ˆë©´ ì¢‹ê²Ÿë‹¹..ã…ã…ê³ ë§ˆì›Œ`; return; }
      if (text.includes("ëª¨ì°Œ")) { document.getElementById(id).innerText = `ã„´ ë¦¬ì¿ : ì˜¤! ë‚˜ ëª¨ì°Œ ì§„ì§œ ì¡°ì•„í•´ ê°™ì´ ë¨¹ìœ¼ëŸ¬ ê°ˆë˜??`; return; }
    }
    if (currentMember.name === "ì•ˆê±´í˜¸") {
      if (text.includes("í”¼ì•„ë…¸")) { document.getElementById(id).innerText = `ã„´ ì•ˆê±´í˜¸: í•œ ê³¡ ì³ì¤„ê¹Œ? ë°˜í•˜ì§€ë‚˜ ë§ˆë¼ ã…‹ã…‹`; return; }
      if (text.includes("ë°”ë³´")) { document.getElementById(id).innerText = `ã„´ ì•ˆê±´í˜¸: ë°”ë‹¤ì˜ ë³´ë¬¼?ã…‹ ì‘ ë°˜ì‚¬ğŸ˜œ`; return; }
    }

    // 4. ì¼ë°˜ ë¶„ë¥˜
    let type = "normal";
    if (text.includes("ì†Œë¬¸") || text.includes("ë“¤ì—ˆì–´") || text.includes("ë´¤ì–´") || text.includes("ëª©ê²©")) type = "rumor";
    else if (text.includes("ì¹œêµ¬") || text.includes("ì¹œí•´") || text.includes("ë² í”„") || text.includes("ì¼ì´Œ") || text.includes("ìš°ì •") || text.includes("ë²ˆí˜¸")) type = "friend";
    else if (text.includes("ì‚¬ë‘") || text.includes("ì¢‹ì•„") || text.includes("ì„¤ë ˆ") || text.includes("ë‚´êº¼") || text.includes("ê²°í˜¼")) type = "love";
    else if (text.includes("í˜ë“¤") || text.includes("ìŠ¬í¼") || text.includes("ìš°ìš¸") || text.includes("ëˆˆë¬¼")) type = "sad";

    const replyPool = currentMember.replies[type] || currentMember.replies['normal'];
    const reply = replyPool[Math.floor(Math.random() * replyPool.length)];
    
    document.getElementById(id).innerText = `ã„´ ${currentMember.name}: ${reply}`;
  }, 1000);
}

window.addEventListener("click", () => {
  const bgm = document.getElementById("bgm");
  if (bgm.paused) { bgm.volume = 0.5; bgm.play(); }
}, { once: true });
</script>
</body>
</html>
